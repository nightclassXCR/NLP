# 医学智能问答助手

基于Qwen2.5模型的医学问答系统，提供专业的医学咨询和健康建议。

## ✨ 核心功能

- 🤖 **智能AI问答**：基于Qwen2.5-0.5B-Instruct模型
- 🩺 **症状诊断**：智能症状收集和专业诊断建议
- 💊 **用药指导**：专业药物咨询和安全提醒
- 💬 **现代化界面**：美观的聊天界面和交互体验
- 🔧 **模型微调**：支持自定义医学数据训练
- 🌐 **前后端分离**：RESTful API架构

## 📁 项目结构

```
自然语言处理/
├── api_server.py          # FastAPI后端服务
├── start_server.py        # 一键启动脚本
├── qwen_finetune.py       # 模型微调脚本（可选）
├── requirements.txt       # 依赖包
├── README.md             # 项目文档
├── fronted/              # 前端文件
│   └── 交互页面.html      # 智能前端页面
└── data/                 # 训练数据
    ├── filtered_data.json
    └── eval_data.json
```

## 🎯 智能功能

### 🩺 症状诊断助手
- **结构化症状收集**：引导用户详细描述症状
- **多维度信息**：主要症状、持续时间、严重程度、伴随症状
- **智能问题构建**：自动转换为专业的医学问题
- **专业建议**：基于详细信息提供诊断建议

### 💊 用药指导助手
- **药物信息收集**：药物名称、用药目的、具体问题
- **个性化指导**：针对具体药物提供专业建议
- **安全提醒**：包含副作用、注意事项等重要信息
- **专业咨询**：提供用法用量和用药安全指导

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 启动服务

**方法一：使用启动脚本（推荐）**
```bash
python start_server.py
```

**方法二：手动启动**
```bash
# 启动后端
python api_server.py

# 在浏览器中打开前端页面
# fronted/交互页面.html
```

### 3. 访问应用

- 前端页面：打开 `fronted/交互页面.html`
- API文档：http://localhost:8002/docs
- 健康检查：http://localhost:8002/health

## 🎯 使用示例

### 症状诊断示例
**用户操作**：
1. 点击"症状诊断"按钮
2. 填写：头痛、持续2天、中等程度、伴有恶心
3. 点击"获取诊断建议"

**AI生成问题**：
"我头痛，已经持续2天，症状程度为中等，还伴有恶心，请问这是什么原因，应该怎么办？"

### 用药指导示例
**用户操作**：
1. 点击"用药指导"按钮
2. 填写：布洛芬、止痛、用法和注意事项
3. 点击"获取用药指导"

**AI生成问题**：
"关于布洛芬这个药（用于止痛），请问应该怎么使用？有什么注意事项？"

## 📊 功能对比

| 功能 | 传统版本 | 智能版本 |
|------|----------|----------|
| 疾病咨询 | 固定问题"感冒了应该吃什么药？" | 智能症状诊断，收集详细信息 |
| 用药指导 | 固定问题"这种药该怎么吃？" | 专业用药指导，针对具体药物 |
| 用户体验 | 简单快捷 | 结构化、专业化 |
| AI回答质量 | 通用回答 | 基于详细信息的专业回答 |

## API接口

### POST /ask
发送医学问题并获取回答

**请求体：**
```json
{
  "question": "感冒了应该吃什么药？"
}
```

**响应：**
```json
{
  "success": true,
  "answer": "根据您的描述，建议...",
  "question": "感冒了应该吃什么药？"
}
```

### GET /health
健康检查接口

**响应：**
```json
{
  "status": "healthy",
  "model_loaded": true,
  "message": "服务运行正常"
}
```

## 模型微调

如果你想使用自己的医学数据微调模型：

1. 准备训练数据，格式如下：
```json
[
  {
    "instruction": "用户问题",
    "output": "标准回答"
  }
]
```

2. 将数据保存为 `data/filtered_data.json`

3. 运行微调脚本：
```bash
python qwen_finetune.py
```

4. 微调完成后，重启服务即可使用微调后的模型

## 注意事项

- 本系统仅供学习和参考，不能替代专业医疗建议
- 如有紧急医疗情况，请立即就医
- 首次运行会自动下载模型，需要网络连接
- 建议使用GPU加速推理（如果可用）

## 故障排除

### 后端启动失败
- 检查Python版本（建议3.8+）
- 确认所有依赖已安装
- 检查端口8002是否被占用

### 前端无法连接后端
- 确认后端服务已启动
- 检查防火墙设置
- 尝试访问 http://localhost:8002/health

### 模型加载失败
- 检查网络连接
- 确认有足够的磁盘空间
- 查看控制台错误信息

## 技术栈

- **后端**: FastAPI + Transformers + PyTorch
- **前端**: HTML + CSS + JavaScript + Tailwind CSS
- **模型**: Qwen2.5-0.5B-Instruct
- **部署**: Uvicorn

## 许可证

本项目仅供学习使用，请遵守相关法律法规。
